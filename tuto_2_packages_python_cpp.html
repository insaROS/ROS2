<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutoriels ROS2 </title>
    <link rel="short icon" href="pdf/INSA.ico" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Tutoriels ROS2 </h1>
    </header>

    <button id="menu-button">Menu</button>
    <nav>
        <a href="/ROS2/index.html">Accueil</a>
        <a href="/ROS2/tuto_installation_ros2.html">Installation de ROS2</a>
        <a href="/ROS2/tuto_installation_prerequis_matlab.html">Installation des prérequis à l'utilisation de Matlab avec ROS2</a>
        <a href="/ROS2/tuto_1_noeuds_topics_services_actions.html">Noeuds, Topics, Services et Actions</a>
        <a href="/ROS2/tuto_2_packages_python_cpp.html" class="active">Création de packages Python et C++</a>
        <a href="/ROS2/tuto_3_ros_domain_id.html">Comprendre les ROS_DOMAIN_ID</a>
        <a href="/ROS2/tuto_4_ros2_matlab.html">Utiliser Matlab avec ROS2</a>
        <a href="/ROS2/tuto_5_micro-ros.html">Micro-ROS</a>
        <a href="/ROS2/tuto_6_turtlebot3.html">TurtleBot3</a>
        <a href="/ROS2/contact.html">Bibliographie</a>
        <!-- Ajoutez d'autres liens pour chaque tutoriel -->
    </nav>

    <div id="menu-dropdown">
        <a href="/ROS2/index.html">Accueil</a>
        <a href="/ROS2/tuto_installation_ros2.html">Installation de ROS2</a>
        <a href="/ROS2/tuto_installation_prerequis_matlab.html">Installation des prérequis à l'utilisation de Matlab avec ROS2</a>
        <a href="/ROS2/tuto_1_noeuds_topics_services_actions.html">Noeuds, Topics, Services et Actions</a>
        <a href="/ROS2/tuto_2_packages_python_cpp.html" class="active">Création de packages Python et C++</a>
        <a href="/ROS2/tuto_3_ros_domain_id.html">Comprendre les ROS_DOMAIN_ID</a>
        <a href="/ROS2/tuto_4_ros2_matlab.html">Utiliser Matlab avec ROS2</a>
        <a href="/ROS2/tuto_5_micro-ros.html">Micro-ROS</a>
        <a href="/ROS2/tuto_6_turtlebot3.html">TurtleBot3</a>
        <a href="/ROS2/contact.html">Bibliographie</a>
        <!-- Ajoutez d'autres liens pour chaque tutoriel -->
    </div>

    
    <main>
        
        
        <section>
            <article>
                <h2>Tutoriel : Création de packages Python et C++</h2>
                
                <div class="table-of-contents">
                    <h3>Table des matières</h3>
                    <ul>
                        <li><a href="#section1">Introduction</a></li>
                        <li><a href="#section2">Créer un workspace ROS2</a></li>
                        <li><a href="#section3">Comprendre les packages (Python et CMake)</a></li>
                        <li><a href="#section4">Créer un package Python</a></li>
                        <li><a href="#section5">Créer un package CMake</a></li>
                        <li><a href="#section6">Créer un package publisher/subscriber en Python</a></li>
                        <li><a href="#section7">Créer un package pour faire bouger une tortue de TurtleSim</a></li>
                        <li><a href="#section8">Annexes</a></li>
                    </ul>
                </div>

                <section id="section1">
                    <h3>Introduction</h3>
                    <p>Ce second tutoriel a pour but de comprendre plus en profondeur ce que sont les Publishers et les Subscribers. 
                        Notamment, de mettre en place une communication entre un Publisher et un Subscriber en utilisant le langage de programmation Python et CMake (<code>C++</code>). 
                        Nous allons donc d'abord nous intéresser à ce que sont Python et CMake.
                    </p>

                    <ul style="list-style-type: disc;">
                        <li>
                            <p>
                                <strong>Python</strong> : Python est un langage de programmation simple, utilisé pour le développement back-end d'applications web ou mobile, 
                                mais aussi pour développer des applications pour PC. En plus de cela, Python possède un grand nombre de bibliothèque qui rendent son utilisation 
                                applicable dans la plupart des domaines, ce qui comble le fait que le codage d'applications lourdes devient très vite difficile.
                            </p>
                        </li>

                        <li>
                            <p>
                                <strong>CMake</strong> : CMake est un système de construction logicielle multiplateforme. Il facilite grandement la création de projet, en vérifiant 
                                les prérequis nécessaires à leur création, et en déterminant les dépendances entre les différents composants d'un même projet. <br>
                                On va alors pouvoir créer plusieurs packages qui servent à informer CMake des différentes dépendances, et ensuite utiliser des programmes écris avec 
                                un langage de programmation supporté par CMake (<code>C++</code> par exemple) dans chacun de ces packages. Cela, afin de créer un projet fonctionnel dont chaque partie 
                                est indépendamment géré par le système de construction. Il est alors plus facile de gérer et corriger des erreurs si elles apparaissent. 
                            </p>

                        </li>
                    </ul>
                </section>

                <section id="section2">
                    <h3>Créer un workspace ROS2</h3>

                    <p>Un workspace est simplement un dossier qui contient des packages pour ROS2. Avant d'utiliser ROS2, vous devez sourcer les fichiers setup de ROS2 dans votre terminal. 
                        Cela se fait automatiquement car le fichier .bashrc contient les informations nécessaires. Cela rend les différentes fonctions de ros2 disponibles pour une utilisation dans ce terminal . 
                        Cette source de ROS2 agit comme un "<strong>underlay</strong>" qui permet d'utiliser les fonctionnalités de ROS2.
                    </p>
                    
                    <p>Vous pouvez aussi sourcer un "<strong>overlay</strong>" - un espace de travail supplémentaire où vous pouvez ajouter de nouveaux packages, que vous avez créés ou non, sans perturber votre espace de travail ROS2 actuel. 
                        Votre sous-couche (l'overlay) doit contenir les dépendances de tous les packages de votre overlay. <br>
                        Les packages de votre overlay auront la priorité sur ceux de la sous-couche (c'est à dire que si vous avez un package qui modifie TurtleSim dans votre workspace et que vous sourcez l'overlay ; si vous lancez 
                        TurtleSim vous aurez alors sa version modifiée). Vous pouvez également avoir plusieurs couches de sous-couches et d'overlays, et chaque overlay suivant utilise les packages de ses sous-couches parentes.
                    </p>
                    <section id="subsection2-1">
                        <h4>Mise de la source dans fichier ~/.bashrc</h4>
                        <p>Cette partie consiste à ce que la source de ROS2, "l'underlay" soit ajouté automatiquement pour chaque nouveau terminal que vous ouvrez. Pour ce faire suivez les instructions suivantes :</p>
                    
                        <ol>
                            <li><p>Ouvrez un terminal avec <code>ctrl+alt+T</code>, puis modifier le fichier <code>.bashrc</code> avec la commande suivante puis tapez votre mot de passe :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code0')">Copier</button>
<pre id="code0" class="code-content">
cd ~
sudo nano .bashrc
</pre>
                                </div>
                                <img src="images/tuto_2/section2/sudo_nano_bashrc.png" width="200px">
                                <p>La ligne de commande à été expliquée dans le tutoriel : <a href="/ROS2/tuto_1_noeuds_topics_services_actions.html">Noeuds, Topics, Services et Actions</a></p>
                            </li>

                            <li><p>Indiquer le chemin du fichier setup de ROS2. Voici la ligne de code que vous avez à mettre à la fin de ce fichier :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code1')">Copier</button>
<pre id="code1" class="code-content">
source /opt/ros/humble/setup.bash
</pre>
                                </div>
                                <p>Ajoutez le chemin du fichier setup de ROS2 à la fin de ce fichier et vous devriez obtenir :</p>
                                <img src="images/tuto_2/section2/bashrc.png" width="450px">
                                <p>Sauvegardez et quittez le fichier avec <code>ctrl+O</code>, <code>Entrer</code> et ensuite <code>ctrl+X</code>.</p>
                                <p>La source du fichier setup.bash de ROS2 correspond à l'underlay de notre espace de travail. Par la suite nous ajouterons un overlay pour pouvoir utiliser nos propres packages.</p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection2-2">
                        <h4>Créer le répertoire qui servira de workspace</h4>
                        <p>La meilleure pratique consiste à créer un nouveau répertoire pour chaque nouveau workspace. Le nom n'a pas d'importance, mais il est utile qu'il indique son objectif. Choisissons le nom de répertoire <code>ros2_ws</code>, pour "espace de développement".</p>

                        <ol>
                            <li><p>Créez votre premier workspace en tapant la commande suivante :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code2')">Copier</button>
<pre id="code2" class="code-content">
mkdir ~/ros2_ws/src/
</pre>
                                </div>
                                <img src="images/tuto_2/section2/mkdir -p ros2_ws.png" width="230px">
                                <p>Explication de la commande :</p>

                                <ul>
                                    <li><p><strong>mkdir</strong> : permet de créer un répertoire</p></li>
                                    <li><p><strong>-p</strong> : paramètre de la fonction mkdir permettant de créer directement un sous répertoires à notre répertoire principal</p></li>
                                    <li><p><strong>~/ros2_ws/src</strong> : définit un chemin de répertoire et sous répertoire.</p></li>
                                </ul>

                                <p>Donc la commande suivante permet de créer le répertoire de notre workspace ainsi qu'un sous répertoire <code>src</code> :</p>
                                <div class="code-block" style="background-color: lightgrey;">
<pre id="code3" class="code-content">
mkdir ~/ros2_ws/src/
</pre>
                                </div>
                                <p>Une autre bonne pratique consiste à placer tous les packages de votre espace de travail dans le répertoire <code>src</code>.</p>
                            </li>

                            <li><p>Déplacez vous dans le répertoire <code>src</code> de votre workspace. Pour ce faire tapez la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code3.1')">Copier</button>
<pre id="code3.1" class="code-content">
cd ~/ros2_ws/src/
</pre>
                                </div>
                                <img src="images/tuto_2/section2/cd src worspace.png" width="210px">
                            </li>

                            <li>
                                <p>Vous pouvez utiliser la commande <code>ls</code> pour voir les fichiers dans le sous-répertoire <code>src</code>.</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code4')">Copier</button>
<pre id="code4" class="code-content">
ls
</pre>
                                </div>

                                <p>Pour le moment, ce sous-répertoire est vide et cela est bien normal. C'est dans ce répertoire que vous allez créer prochainement des nouveaux packages.</p>
                            </li>

                            <li>
                                <p>Revenez dans la racine de votre workspace pour la suite du tutoriel (ie. revenez dans le répertoire <code>~/ros2_ws/</code>).</p>
                                <p id="sub_sec:cd arriere">Vous avez le choix entre deux méthodes pour faire ceci avec la commande cd (<code>cd</code> => change directory):</p>
                                <ul style="list-style-type: '- ';">
                                    <li>
                                        <p>Première méthode (permet de chosir le chemin précis où vous souhaitez vous rendre) :</p>
                                        <div class="code-block">
<button class="copy-button" onclick="copyCode('code5')">Copier</button>
<pre id="code5" class="code-content">
cd ~/ros2_ws/
</pre>
                                        </div>
                                        <img src="images/tuto_2/section2/cd arriere meth 1.png" width="240px">
                                    </li>

                                    <li>
                                        <p>Deuxième méthode (permet de revenir dans le répertoire parent de celui où vous êtes):</p>
                                        <div class="code-block">
<button class="copy-button" onclick="copyCode('code6')">Copier</button>
<pre id="code6" class="code-content">
cd ..
</pre>
                                        </div>
                                        <img src="images/tuto_2/section2/cd arriere meth 2.png" width="220px">
                                    
                                    </li>
                                </ul>
                            
                            </li>

                            <li>
                                <p> Tapez la commande <code>ls</code> pour voir ce que contient votre workspace. Vous pourrez voir qu'il ne contient que votre sous répertoire <code>src</code> qui lui est vide pour le moment.</p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection2-3">
                        <h4>Construire votre workspace avec colcon</h4>
                        <p>Ceci est un mini tutoriel sur la façon de construire un workspace ROS2 avec colcon. Un workspace ROS2 est 
                            un répertoire avec une structure particulière. En général, il y a un sous-répertoire <code>src</code> (vous venez de le créer). 
                            A l'intérieur de ce sous-répertoire se trouve le code source des différents packages.
                            <br><br>
                            Typiquement, le répertoire <code>src</code> commence par être vide (c'est votre cas !).
                        </p>
                        <ol>
                            <li>
                                <p>Depuis la racine de votre workspace (faites la commande <code>cd ~/ros2_ws/</code> pour aller dans la racine), vous pouvez maintenant construire vos packages à l'aide de la commande colcon :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code7')">Copier</button>
<pre id="code7" class="code-content">
cd ~/ros2_ws/
colcon build
</pre>
                                </div>
                                <img src="images/tuto_2/section2/colcon build.png" width="240px">
                            </li>

                            <li>
                                <p><i>Explication de colcon :</i> colcon réalise la construction du workspace à partir des sources. Par défaut, il créera les répertoires suivants en tant que répertoire voisins de <code>src</code> :</p>
                                <ul style="list-style-type:disc;">
                                    <li><p>Le répertoire <strong>build</strong> sera l'endroit où les fichiers intermédiaires seront stockés. Pour chaque package, un sous-dossier sera créé dans lequel, par exemple, CMake sera invoqué.</p></li>
                                    <li><p>Le répertoire <strong>install</strong> est l'endroit où chaque package sera installé. Par défaut, chaque package est installé dans un sous-répertoire distinct.</p></li>
                                    <li><p>Le répertoire <strong>log</strong> contient diverses informations de chacune des invocation de colcon.</p></li>
                                </ul>
                            </li>

                            <li>
                                <p>Vous pouvez ensuite faire un <code>ls</code> (en étant dans le répertoire du workspace <code>~/ros2_ws/</code>) pour voir que les répertoires build, install et log ont bien été créés dans la racine du workspace (à côté de <code>src</code>):</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code8')">Copier</button>
<pre id="code8" class="code-content">
ls
</pre>
                                </div>
                                <img src="images/tuto_2/section2/workspace build.png" width="190px">
                            </li>
                        </ol>
                    </section>


                </section>

                <section id="section3">
                    <h3>Comprendre les packages (Python et CMake)</h3>

                    <p>Un package est une unité d'organisation pour votre code ROS2. Si vous voulez pouvoir installer votre code ou le partager avec d'autres, vous aurez besoin de l'organiser dans un package. 
                        Avec les packages, vous pouvez publier votre travail ROS2 et permettre aux autres de le construire et de l'utiliser facilement.
                    </p>
                    <p>ROS2 utilise "<strong>ament</strong>" comme <i>système de construction</i> de packages et "<strong>colcon</strong>" comme <i>outil de construction</i> de ces packages. 
                        Vous pouvez créer un package en utilisant CMake ou Python, qui sont officiellement supportés, bien que d'autres types de construction existent.
                    </p>
                    <p>Les paquets ROS2 Python et CMake ont chacun leur propre contenu minimum requis :</p>
                    
                    <ul style="list-style-type: disc;">
                        <li>
                            <p><i><U>Package Python</U></i></p>
                            <ul style="list-style-type: '- ';">
                                <li><p><strong>package.xml</strong> : fichier contenant des méta-informations sur le package</p></li>
                                <li><p><strong>resource/&lt;nom_du_package&gt;</strong> : fichier marqueur pour le package</p></li>
                                <li><p><strong>setup.cfg</strong>  est nécessaire lorsqu'un package a des exécutables, afin que ros2 run puisse les trouver</p></li>
                                <li><p><strong>setup.py</strong> contient les instructions pour l'installation du package</p></li>
                                <li><p><strong>&lt;nom_du_package&gt;</strong> est un répertoire avec le même nom que votre package, utilisé par les outils de ROS2 pour trouver votre package, qui contient le fichier python <code>__init__.py</code></p></li>
                            </ul>
                        </li>

                        <li>
                            <p><i><U>Package CMake</U></i></p>
                            <ul style="list-style-type: '- ';">
                                <li><p><strong>CMakelist.txt</strong> : fichier qui décrit comment construire le code dans le package</p></li>
                                <li><p><strong>include/&lt;nom_du_package&gt;</strong> : le répertoire contenant les en-têtes publics du package</p></li>
                                <li><p><strong>package.xml</strong> : fichier contenant des méta-informations sur le package</p></li>
                                <li><p><strong>src</strong> : répertoire contenant le code source du package</p></li>                   
                            </ul>
                        </li>
                    </ul>
                
                </section>

                <section id="section4">
                    <h3>Créer un package Python</h3>
                    <p>Dans cette partie nous allons créer un package python qui permet d'écrire du texte dans un terminal.</p>

                    <section id="subsection4-1">
                        <h4>Créer le package</h4>

                        <ol>
                            <li>
                                <p>Déplacez vous dans le répertoire <code>src</code> de votre workspace. Pour ce faire tapez la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code9')">Copier</button>
<pre id="code9" class="code-content">
cd ~/ros2_ws/src/
</pre>
                                </div>
                                <img src="images/tuto_2/section2/cd src worspace.png" width="190px">
                            </li>

                            <li>
                                <p>Observez la structure de la commande à taper pour créer un package :</p>
                                <div class="code-block" style="background-color: lightgrey;">
<pre class="code-content">
ros2 pkg create --build-type ament_python &lt;package_name&gt;
</pre>
                                </div>
                                <p>Nous appellerons notre package <code>my_package</code> et nous utiliserons l'argument optionnel <code>--node-name</code> qui crée un simple exécutable (nommé <code>my_node</code> ) de type Hello World dans le package.</p>
                            </li>

                            <li>
                                <p>Entrez la commande suivante dans votre terminal :</p> 
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code10')">Copier</button>
<pre id="code10" class="code-content">
ros2 pkg create --build-type ament_python --node-name my_node my_package
</pre>
                                </div>
                                <img src="images/tuto_2/section4/ros2 pkg create.png" width="600px">
                                <p>Après avoir exécuté la commande, votre terminal affichera le message suivant :</p>
                                <img src="images/tuto_2/section4/ros2 pkg create res.png" width="550px">
                                <p>Vous aurez maintenant un nouveau dossier dans le répertoire <code>src</code> de votre espace de travail, appelé <code>my_package</code>.</p>
                            </li>

                            <li>
                                <p>Vous pouvez utiliser la commande <code>ls</code> pour voir les fichiers dans le sous-répertoire src. Vous constaterez que votre package à bien été créé :</p>
                                <img src="images/tuto_2/section4/ls my_package.png" width="450px">
                            </li>
                        </ol>

                    </section>

                    <section id="subsection4-2">
                        <h4>Construire le package</h4>
                        <p>Le fait de placer les packages dans un workspace est particulièrement utile car vous pouvez ensuite construire plusieurs packages en même temps en lançant <code>colcon build</code> à la racine du workspace :</p>

                        <ol>
                            <li><p>Retournez à la racine de votre espace de travail. Puis construisez votre package en reconstruisant tout votre workspace en tapant la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code13')">Copier</button>
<pre id="code13" class="code-content">
cd ~/ros2_ws/
colcon build
</pre>
                                </div>
                                <img src="images/tuto_2/section2/colcon build.png" alt="colcon build" width="220px">
                            </li>

                            <li><p>Pour construire uniquement ce package et pas tout votre workspace, tapez la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code14')">Copier</button>
<pre id="code14" class="code-content">
colcon build --packages-select my_package
</pre>
                                </div>
                                <img src="images/tuto_2/section4/colcon build my_package.png" alt="colcon build my_package" width="400px">
                            </li>
                        </ol>

                    </section>

                    <section id="subsection4-3">
                        <h4>Sourcer l'overlay de votre workspace</h4>
                        <ol>
                            <li>
                                <p>Votre package est donc construit et il peut donc être utilisé avec ROS2. Pour ce faire, nous devons mettre la source de l'overlay :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code15')">Copier</button>
<pre id="code15" class="code-content">
cd ~/ros2_ws/
source install/setup.bash
</pre>
                                </div>
                                <img src="images/tuto_2/section4/source overlay.png" alt="source overlay" width="300px">
                            </li>
                            <li>
                                <p><strong>N'oubliez pas cette étape sinon la commande suivante ne fonctionnera pas car "l'overlay" n'est pas sourcé</strong>.</p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection4-4">
                        <h4>Tester votre premier package Python</h4>
                        <ol>
                            <li>
                                <p>Observez la structure de la commande permettant de lancer le package :</p>
                                
                                <div class="code-block" style="background-color: lightgrey;">
<pre id="code16" class="code-content">
ros2 run &lt;package_name&gt; &lt;node_name&gt;
</pre>
                                </div>                               
                                <p>Dans notre cas, le package se nomme <code>my_package</code>. <code>&lt;node_name&gt;</code> correspond à l'exécutable du package : <code>my_node</code>. 
                                    Cet exécutable a été créé automatiquement lors de la création du package (à cause du paramètre <code>--node-name my_node</code> ).
                                </p>
                            </li>
                        
                            <li>
                                <p>Testez le package en tapant la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code17')">Copier</button>
<pre id="code17" class="code-content">
ros2 run my_package my_node
</pre>
                                </div>
                                <img src="images/tuto_2/section4/ros2 run my_package my_node.png" width="300px">
                                <p>Vous obtiendrez dans le terminal :</p>
                                <img src="images/tuto_2/section4/ros2 run my_package my_node res.png" width="300px">
                                <p>Vous pouvez voir que l'exécutable <code>my_node</code> du package permet d'afficher du texte dans le terminal.</p>
                            </li>
                        
                            <li>
                                <p>Suivez les instructions suivantes, pour modifier la phrase retournée dans le terminal. Rendez-vous dans le répertoire <code>~/ros2_ws/src/my_package/my_package/</code> :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code17.1')">Copier</button>
<pre id="code17.1" class="code-content">
cd ~/ros2_ws/src/my_package/my_package/
</pre>
                                </div>
                                <img src="images/tuto_2/section4/cd ros src my_pack my_pack.png" width="410px">
                                <p>Faites la commande <code>ls</code>:</p>
                                <img src="images/tuto_2/section4/ls ros src my_pack my_pack.png" width="350px">
                                <p>Le fichier <code>__init__.py</code> est un fichier créé automatiquement lors du build du package.<br>Le fichier <code>my_node.py</code> est l'exécutable qui a été créé automatiquement lors de la création du package. Cet exécutable est un code python servant, ici, à afficher du texte dans le terminal.</p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection4-5">
                        <h4>Modifier votre premier package Python</h4>
                        <ol>
                            <li>
                                <p>Ouvrez le fichier <code>my_node.py</code> avec le même type de commande que pour modifier le fichier <code>.bashrc</code>. Pour rappel, utilisez la fonction :</p>
                                <div class="code-block" style="background-color: lightgray;">
<pre id="code18" class="code-content">
sudo nano &lt;nom_fichier&gt;
</pre>
                                </div>
                                <p>Tapez la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code18.1')">Copier</button>
<pre id="code18.1" class="code-content">
sudo nano my_node.py
</pre>
                                </div>
                                <img src="images/tuto_2/section4/sudo nano my_node.png" width="450px">
                                <p>Le code python <code>my_node.py</code> va s'ouvrir avec l'éditeur nano :</p>
                                <img src="images/tuto_2/section4/code my_node py.png" width="450px">
                                <p>En observant le code, vous pouvez voir la présence d'une condition qui est toujours valide qui appelle la fonction <code>main()</code>. Cette fonction <code>main()</code> contient la fonction <code>print()</code> qui affiche le texte sur le terminal.</p>
                            </li>
                        
                            <li>
                                <p>Modifiez la phrase présente dans la fonction <code>print()</code>. <br>Mettez par exemple : <code>Bonjour, voici un test de my_package.</code></p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code18.2')">Copier</button>
<pre id="code18.2" class="code-content">
def main():
    print('Bonjour, voici un test de my_package.')

if __name__ == '__main__':
    main()
</pre>
                                </div>
                                <img src="images/tuto_2/section4/sudo nano my_node modif.png" width="350px">
                                <p>Enregistrez le fichier ! À cette étape, vous avez besoin de reconstruire juste votre package et pas tout votre workspace.</p>
                            </li>
                        
                            <li>
                                <p><strong>Retournez dans la racine</strong> et tapez la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code19')">Copier</button>
<pre id="code19" class="code-content">
cd ~/ros2_ws/
colcon build --packages-select my_package
</pre>
                                </div>
                                <img src="images/tuto_2/section4/colcon build my_package.png" width="400px">
                            </li>
                        
                            <li>
                                <p>Tapez la commande suivante et vérifiez que le texte affiché a bien été modifié lors de la construction de votre package :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code20')">Copier</button>
<pre id="code20" class="code-content">
ros2 run my_package my_node
</pre>
                                </div>
                                <img src="images/tuto_2/section4/ros2 run modifié.png" width="350px">
                                <p>Voilà, vous avez créé un package simple en python, permettant de créer un nœud <code>my_node</code> qui affiche une ligne de texte dans un terminal.</p>
                            </li>
                        </ol>
                    </section>

                </section>

                <section id="section5">
                    <h3>Créer un package avec CMake</h3>
                    <p>Dans cette partie nous allons créer un package avec CMake qui permet d'écrire du texte dans un terminal.</p>

                    <section id="subsection5-1">
                        <h4>Créer le package</h4>
                        <ol>
                            <li>
                                <p>Rendez-vous dans le répertoire <code>src</code> de votre workspace. Pour ce faire, tapez la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code21')">Copier</button>
<pre id="code21" class="code-content">
cd ~/ros2_ws/src/
</pre>
                                </div>
                                <img src="images/tuto_2/section2/cd src worspace.png" width="200px">
                            </li>
                        
                            <li>
                                <p>Observez la structure de la commande à taper pour créer un package en CMake. Elle est similaire à celle pour le python :</p>
                                <div class="code-block" style="background-color: lightgray;">
<pre id="code22" class="code-content">
ros2 pkg create --build-type ament_cmake &lt;package_name&gt;
</pre>
                                </div>
                                <p>Nous appellerons notre package <code>my_package2</code> et nous utiliserons l'argument optionnel <code>--node-name</code> qui crée un simple exécutable (nommé <code>my_node</code>) de type Hello World dans le package.</p>
                            </li>
                        
                            <li>
                                <p>Entrez la commande suivante dans votre terminal, pour créer un package nommé <code>my_package2</code> en CMake :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code23')">Copier</button>
<pre id="code23" class="code-content">
ros2 pkg create --build-type ament_cmake --node-name my_node my_package2
</pre>
                                </div>
                                <img src="images/tuto_2/section5/ros2 package create.png" width="650px">
                                <p>Vous aurez maintenant un nouveau dossier dans le répertoire <code>src</code> de votre espace de travail appelé <code>my_package2</code>.</p>
                            </li>
                        
                            <li>
                                <p>Vous pouvez utiliser la commande <code>ls</code> pour voir les fichiers dans le sous-répertoire <code>src</code> de votre workspace. Vous constaterez que votre package a bien été créé.</p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection5-2">
                        <h4>Construire le package avec CMake</h4>
                        <p>Le fait de placer les packages dans un workspace est particulièrement utile car vous pourrez ensuite construire plusieurs packages en même temps en lançant colcon build à la racine du workspace.</p>

                        <ol>
                            <li>
                                <p>Retournez à la racine de votre espace de travail :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code23.1')">Copier</button>
<pre id="code23.1" class="code-content">
cd ~/ros2_ws/
</pre>
                                </div>
                            </li>

                            <li>
                                <p>Construisez votre package en reconstruisant uniquement, <code>my_package2</code>, votre nouveau package :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code24')">Copier</button>
<pre id="code24" class="code-content">
colcon build --packages-select my_package2
</pre>
                                </div>
                                <img src="images/tuto_2/section5/colcon build my_package2.png" width="400px">
                                <p>Si vous souhaitez faire la reconstruction de votre workspace entier, suivez les commandes </p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code24.1')">Copier</button>
<pre id="code24.1" class="code-content">
colcon build
</pre>
                                </div>

                            </li>
                        </ol>

                    </section>

                    <section id="subsection5-3">
                        <h4>Sourcer l'overlay de votre workspace</h4>
                        <ol>
                            <li>
                                <p>Votre package est donc construit et peut donc être utilisé avec ROS2. Pour ce faire, nous devons mettre la source de l'overlay :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code25')">Copier</button>
<pre id="code25" class="code-content">
cd ~/ros2_ws/
source install/setup.bash
</pre>
                                </div>
                                <img src="images/tuto_2/section4/source overlay.png" width="300px">
                            </li>
                        
                            <li>
                                <p><strong><em>N'oubliez pas cette étape sinon la commande suivante ne fonctionnera pas car vous n'aurez pas sourcé "l'overlay"</em></strong>.</p>
                            </li>
                        </ol>
                        
                    </section>

                    <section id="subsection5-4">
                        <h4>Tester votre premier package avec CMake</h4>
                        <ol>
                            <li>
                                <p>Observez la structure de la commande permettant de lancer votre package :</p>
                                <div class="code-block" style="background-color: lightgray;">
<pre id="code26" class="code-content">
ros2 run &lt;package_name&gt; &lt;node_name&gt;
</pre>
                                </div>
                                <p>Dans notre cas, notre package se nomme <code>my_package2</code>. <code>&lt;node_name&gt;</code> correspond à l'exécutable de notre package : <code>my_node</code>. Cet exécutable a été créé automatiquement lors de la création du package (à cause du paramètre <code>--node-name my_node</code>).</p>
                            </li>
                        
                            <li>
                                <p>Testez votre package en tapant la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code26.1')">Copier</button>
<pre id="code26.1" class="code-content">
ros2 run my_package2 my_node
</pre>
                                </div>
                                <img src="images/tuto_2/section5/ros2 run my_package2.png" width="350px">
                                <p>Vous obtiendrez dans le terminal :</p>
                                <img src="images/tuto_2/section5/ros2 run my_package2 res.png" width="350px">
                                <p>Vous pouvez voir que l'exécutable <code>my_node</code> de votre package permet de faire afficher du texte dans le terminal comme le package en python.</p>
                            </li>
                        
                            <li>
                                <p>Suivez les instructions suivantes, pour modifier la phrase retournée dans le terminal. Rendez-vous dans le répertoire <code>~/ros2_ws/src/my_package2/src/</code> :
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code27')">Copier</button>
<pre id="code27" class="code-content">
cd ~/ros2_ws/src/my_package2/src/
</pre>
                                </div>
                                    et faites ensuite la commande <code>ls</code> :</p>
                                <img src="images/tuto_2/section5/ls my_node cpp.png" width="300px">
                                <p>Le fichier <code>my_node.cpp</code> est l'exécutable qui a été créé automatiquement lors de la création du package. Cet exécutable est un code en <code>C++</code> servant, ici, à afficher du texte dans le terminal.</p>
                                <p>Contrairement à un package Python, vous pouvez voir que la structure du package en CMake est différente de celle d'un package en Python.</p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection5-5">
                        <h4>Modifier votre premier package avec CMake</h4>
                        <ol>
                            <li>
                                <p>Ouvrez le fichier <code>my_node.cpp</code> avec le même type de commande que pour modifier le fichier <code>.bashrc</code>. Pour rappel, la fonction à utiliser est la suivante :</p>
                                <div class="code-block" style="background-color: lightgray;">
<pre id="code28" class="code-content">
sudo nano &lt;nom_fichier&gt;
</pre>
                                </div>

                                <p>Utilisez donc la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code28.1')">Copier</button>
<pre id="code28.1" class="code-content">
sudo nano my_node.cpp
</pre>
                                </div>
                                <img src="images/tuto_2/section5/sudo nano my node cpp.png" width="400px">
                                <p>Le code <code>C++</code> dans le fichier <code>my_node.cpp</code> va s'ouvrir avec l'éditeur nano :</p>
                                <img src="images/tuto_2/section5/code my node cpp.png" width="400px">
                                <p>Vous constaterez directement que le code est totalement différent d'un code Python. Ici, nous avons uniquement une fonction main qui contient la fonction <code>printf()</code> avec la phrase (sous la forme d'un String) que vous avez pu voir dans votre terminal précédemment.</p>
                            </li>
                        
                            <li>
                                <p>Modifiez le texte présent dans la fonction <code>printf()</code>. Mettez par exemple :</p>
                                <img src="images/tuto_2/section5/code modifié.png" width="350px">
                                <p>Sauvegardez avec <code>ctrl+O</code>, puis <code>Entrer</code> et <code>ctrl+X</code>.</p>
                                <p>A cette étape, vous avez besoin de reconstruire uniquement votre package et pas tout votre workspace.</p>
                            </li>
                            
                            <li>
                                <p><strong>Retournez dans la racine</strong> et tapez la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code28.2')">Copier</button>
<pre id="code28.2" class="code-content">
cd ~/ros2_ws/
colcon build --packages-select my_package2
</pre>
                                </div>
                                <img src="images/tuto_2/section5/colcon build my_package2.png" width="375px">
                            </li>
                        
                            <li>
                                <p>Tapez la commande suivante pour lancer votre package, et vérifiez que le texte affiché a été bien modifié lors de la construction de votre package :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code28.3')">Copier</button>
<pre id="code28.3" class="code-content">
ros2 run my_package2 my_node
</pre>
                                </div>
                                <img src="images/tuto_2/section5/ros2 run modifié.png" width="300px">
                                <p>Voilà, vous avez créé un package simple en CMake, permettant de créer un nœud <code>my_node</code> qui affiche une ligne de texte dans un terminal.</p>
                            </li>
                        </ol>
                        
                    </section>

                </section>



                <section id="section6">
                    <h3>Créer un package publisher/subscriber avec CMake</h3>
                    <p>Dans ce tutoriel, vous allez créer des nœuds qui se transmettent des informations sous la forme de messages de chaînes de caractères par l'intermédiaire d'un topic. L'exemple utilisé ici est un simple système "talker" et "listener" ; un nœud publie des données sur le topic et l'autre s'abonne au topic afin de recevoir ces données.</p>
                    
                    <section id="subsection6-1">
                        <h4>Créer le package</h4>
                        <ol>
                            <li>
                                <p>Rendez-vous dans le répertoire <code>src</code> de votre workspace <code>ros2_ws/src</code>.</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code29.0')">Copier</button>
<pre id="code29.0" class="code-content">
cd ~/ros2_ws/src/
</pre>
                                </div>
                            </li>
                        
                            <li>
                                <p>Créez un package Python que vous nommerez <code>py_pubsub</code> avec la commande suivante :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code29')">Copier</button>
<pre id="code29" class="code-content">
ros2 pkg create --build-type ament_python --node-name py_pubsub_node py_pubsub
</pre>
                                </div>
                                <img src="images/tuto_2/section6/Images/pkg create py_pubsub.png" width="500px">
                                <p>Après avoir lancé la commande, votre terminal vous renverra le message suivant :</p>
                                <img src="images/tuto_2/section6/Images/pkg create py_pubsub res.png" width="600px">
                                <p>Vous avez peut-être remarqué dans le message, après la création de votre package, que les champs description et licence contiennent des notes TODO. C'est parce que la description du package et la déclaration de licence ne sont pas automatiquement définies, mais sont nécessaires si vous souhaitez publier votre package. Dans ce tutoriel, vous allez aussi apprendre à modifier ces informations.</p>
                            </li>
                        
                            <li>
                                <p>Utilisez la commande <code>ls</code> pour voir les fichiers dans le sous-répertoire <code>src</code>. Vous constaterez que votre package <code>py_pubsub</code> a bien été créé.</p>
                            </li>
                        
                            <li>
                                <p>Nous devons maintenant écrire les nœuds correspondants au publisher et au subscriber dans le répertoire <code>~/ros2_ws/src/py_pubsub/py_pubsub/</code></p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection6-2">
                        <h4>Créer le noeud publisher</h4>
                        <ol>
                            <li>
                                <p>Rendez-vous dans le répertoire <code>~/ros2_ws/src/py_pubsub/py_pubsub/</code> : <a href="#sub_sec_cd_py_pubsub_py_pubsub"></a></p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code30')">Copier</button>
<pre id="code30" class="code-content">
cd ~/ros2_ws/src/py_pubsub/py_pubsub/
</pre>
                                </div>
                                <img src="images/tuto_2/section6/Images/cd py_pubsub py_pubsub.png" width="330px">
                            </li>
                        
                            <li>
                                <p>Créez un fichier <code>publisher_member_function.py</code> avec la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code31')">Copier</button>
<pre id="code31" class="code-content">
sudo nano publisher_member_function.py
</pre>
                                </div>
                                <img src="images/tuto_2/section6/Images/sudo nano publisher.png" width="550px">
                            </li>
                        
                            <li id="code_publisher_member">
                                <p>Ecrivez les lignes suivantes dans le fichier que l'éditeur a ouvert (Vous trouverez ce code en <a href="#annexe1">Annexe 1</a>):</p>
                                <img src="images/tuto_2/section6/Images/code publisher.png" width="525px">
                                <p style="color:red;">Faites attention à l'indentation que vous utilisez dans votre code : Utilisez soit des espaces soit des tabulations mais pas les deux dans le même code.</p>
                                <p style="color:red;">Faites attention à <code>__init__</code> qui contient 2 underscores avant et après le init. Pareil pour <code>__name__</code> et <code>__main__</code>.</p>
                                <p>Sauvegardez avec <code>ctrl+O</code>, puis <code>Entrer</code> et <code>ctrl+X</code>.</p>
                            </li>
                        </ol>
                        
                    </section>

                    <section id="subsection6-3">
                        <h4>Explication du code du publisher</h4>
                        <ol>
                            <li>
                                <p>Les premières lignes de code permettent d'importer rclpy pour que la classe <code>Node</code> puisse être utilisée :</p>
                                <img src="images/tuto_2/section6/Images pub/import rclpy.png" width="175px">
                                <p>La déclaration suivante importe le type de message intégré que le nœud utilisera pour structurer les données qu'il transmettra au topic. Soit, des messages de type <code>String</code> :</p>
                                <img src="images/tuto_2/section6/Images pub/from std_msgs.png" width="200px">
                                <p>Ces lignes représentent les dépendances du nœud. Rappelez-vous que les dépendances doivent être ajoutées au fichier <code>package.xml</code>, ce que vous ferez dans la section suivante.</p>
                            </li>
                        
                            <li>
                                <p>Ensuite, la classe <code>MinimalPublisher</code> est créée, qui hérite de (ou est une sous-classe de) <code>Node</code> :</p>
                                <img src="images/tuto_2/section6/Images pub/class minimal.png" width="180px">
                            </li>
                        
                            <li>
                                <p>Voici, ci-dessous, le constructeur de la classe. La fonction <code>super().__init__</code> appelle le constructeur de la classe <code>Node</code> et lui donne le nom de notre nœud, dans ce cas "<code>minimal_publisher</code>".</p>
                                <p><code>create_publisher</code> déclare que le nœud publie des messages de type <code>String</code> (importé du module <code>std_msgs.msg</code>), sur un topic nommé "topic", et que la "taille de la file d'attente" est de 10. La taille de la file d'attente est un paramètre de QoS (qualité de service) requis qui limite le nombre de messages mis en file d'attente si un subscriber ne les reçoit pas assez rapidement.</p>
                                <p>Ensuite, un timer est créé avec un callback à exécuter toutes les 0.5 secondes. <code>self.i</code> est un compteur utilisé dans le callback :</p>
                                <img src="images/tuto_2/section6/Images pub/init py.png" width="400px">
                            </li>
                        
                            <li>
                                <p><code>timer_callback</code> créé un message avec la valeur du compteur en annexe, et le publie sur le terminal avec la fonction <code>get_logger().info()</code>.</p>
                                <img src="images/tuto_2/section6/Images pub/timer_callback.png" width="375px">
                            </li>
                        
                            <li>
                                <p>Enfin, la fonction principale, <code>main()</code>, est définie :</p>
                                <img src="images/tuto_2/section6/Images pub/def main.png" width="350px">
                                <p>La bibliothèque <code>rclpy</code> est d'abord initialisée, puis le nœud est créé avec la class <code>MinimalPublisher()</code>, et enfin le code fait "<code>spin</code>" le nœud pour que ses callbacks soient appelés toutes les 0.5s.</p>
                            </li>
                        </ol>
                        
                    </section>

                    <section id="subsection6-4">
                        <h4>Créer le noeud subscriber</h4>
                        <ol>
                            <li>
                                <p>Rendez-vous dans le répertoire <code>~/ros2_ws/src/py_pubsub/py_pubsub/</code> et créez un fichier <code>subscriber_member_function.py</code> avec la commande <code>sudo nano</code> : </p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code33')">Copier</button>
<pre id="code33" class="code-content">
cd ~/ros2_ws/src/py_pubsub/py_pubsub/
sudo nano subscriber_member_function.py
</pre>
                                </div>
                            </li>
                        
                            <li id="code_subscriber_member">
                                <p>Ecrivez les lignes suivantes dans le fichier que l'éditeur a ouvert (Vous trouverez ce code en <a href="#annexe2">Annexe 2</a>) :</p>
                                <img src="images/tuto_2/section6/Images sub/code sub.png" width="500px">
                                <p style="color:red;">Faites attention à l'indentation que vous utilisez dans votre code : Utilisez soit des espaces soit des tabulations mais pas les deux dans le même code.</p>
                                <p style="color:red;">Faites attention à <code>__init__</code> qui contient 2 underscores avant et après le init. Pareil pour <code>__name__</code> et <code>__main__</code>.</p>
                                <p>Sauvegardez avec <code>ctrl+O</code>, puis <code>Entrer</code> et <code>ctrl+X</code>.</p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection6-5">
                        <h4>Explication du code du subscriber</h4>
                        <ol>
                            <li>
                                <p>Le code du nœud subscriber est presque identique à celui du publisher. Le constructeur crée un subscriber avec les mêmes arguments que le publisher. Rappelons que le nom du topic et aussi le type de message utilisés par le publisher et le subscriber doivent correspondre pour qu'ils puissent communiquer.</p>
                                <img src="images/tuto_2/section6/Images sub/self subscription.png" width="350px">
                            </li>
                        
                            <li>
                                <p>Le constructeur et le callback du subscriber n'incluent pas de définition de timer, car il n'en a pas besoin. Son callback est appelé dès qu'il reçoit un message.</p>
                                <p>La définition du callback imprime simplement un message d'information sur la console, avec les données qu'il a reçues. Rappelons que le publisher définit : <code>msg.data = 'Hello World : \%d' \% self.i</code> :</p>
                                <img src="images/tuto_2/section6/Images sub/listener callback.png" width="350px">
                            </li>
                        
                            <li>
                                <p>La définition principale <code>main()</code> est presque exactement la même, remplaçant la création et le <code>spin</code> du publisher par celui du subscriber.</p>
                                <p>Voilà, vous venez de créer deux nœuds (un publisher et un subscriber) dans le même package (<code>py_pubsub</code>) !</p>
                            </li>
                        </ol>
                        
                    </section>

                    <section id="subsection6-6">
                        <h4>Ajouter les dépendances pour le publisher</h4>
                        <p>Dans cette section, nous allons ajouter des dépendances comme la description de notre package, l'email de contact, votre nom, et une licence. </p>
                        <ol>
                            <li>
                                <p>Rendez-vous dans le répertoire <code>~/ros2_ws/src/py_pubsub/</code> : </p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code35')">Copier</button>
<pre id="code35" class="code-content">
cd ~/ros2_ws/src/py_pubsub/
</pre>
                                </div>
                            </li>
                        
                            <li>
                                <p>Faites <code>ls</code> pour voir la liste des fichiers et répertoires disponibles dans votre package <code>py_pubsub</code> :</p>
                                <img src="images/tuto_2/section6/Images dépendances/ls package py_pubsub.png" width="375px">
                                <p>Vous pouvez voir que les différents fichiers d'un package python sont présents. Dans notre cas, nous allons commencer par modifier le fichier <code>package.xml</code>.</p>
                            </li>
                        
                            <li>
                                <p>Ouvrez le fichier <code>package.xml</code> avec la commande <code>sudo nano</code> et modifiez les lignes <code>&lt;description&gt;</code>, <code>&lt;maintainer&gt;</code>, et <code>&lt;license&gt;</code> avec vos informations personnelles :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code36')">Copier</button>
<pre id="code36" class="code-content">
sudo nano package.xml
</pre>
                                </div>
                                <img src="images/tuto_2/section6/Images dépendances/modif package xml.png" width="550px">
                                <p>A la suite de ces lignes, ajoutez les dépendances correspondantes aux imports de notre nœud publisher :</p>
                                <img src="images/tuto_2/section6/Images dépendances/dependances xml.png" width="225px">
                                <p>Votre fichier <code>package.xml</code> devrait ressembler à ceci :</p>
                                <img src="images/tuto_2/section6/Images dépendances/package xml 1.png" width="550px">
                                <p>Sauvegardez le fichier !</p>
                            </li>
                        
                            <li>
                                <p>Modifiez ensuite le fichier <code>setup.py</code> avec la commande <code>sudo nano</code> :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code37')">Copier</button>
<pre id="code37" class="code-content">
sudo nano setup.py
</pre>
                                </div>
                            </li>
                        
                            <li>
                                <p>Faites correspondre les champs <code>maintainer</code>, <code>maintainer_email</code>, <code>description</code>, et <code>license</code> avec ceux du fichier <code>package.xml</code> (modifié précédemment).</p>
                            </li>
                        
                            <li>
                                <p>Ajoutez un point d'entrée pour le nœud publisher entre les crochets de <code>'console_script': []</code>. Pour ce faire, ajoutez la ligne suivante, entre les crochets de <code>'console_script': []</code> :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code37.1')">Copier</button>
<pre id="code37.1" class="code-content">
'talker = py_pubsub.publisher_member_function:main',
</pre>
                                </div>
                                <p>N'oubliez pas la virgule à la fin de cette ligne. Votre fichier setup.py devrait être identique à celui ci-dessous :</p>
                                <img src="images/tuto_2/section6/Images dépendances/setup py 1.png" width="375px">
                                <p>Sauvegardez le fichier !</p>
                            </li>
                        
                            <li>
                                <p>Vérifiez que le fichier <code>setup.cfg</code> a bien été créé correctement.</p>
                                <ul>
                                    <li>Ouvrez le fichier <code>setup.cfg</code></li>
                                    <li>Vous devriez obtenir :</li>
                                </ul>
                                <img src="images/tuto_2/section6/Images dépendances/setup cfg.png" width="275px">
                                <p>Il s'agit simplement d'indiquer à setuptools de placer vos exécutables dans lib, car la fonction run de ROS2 les cherchera à cet emplacement.</p>
                            </li>
                        
                            <li>Toutes les dépendances du publisher ont été ajoutées. Passons aux dépendances du subscriber.</li>
                        </ol>
                        
                    </section>

                    <section id="subsection6-7">
                        <h4>Ajouter les dépendances pour le subscriber</h4>
                        <p>Les fichiers modifiés précédemment sont les mêmes pour nos deux nœuds (publisher et subscriber). </p>
                        <ol>
                            <li>
                                <p>Comme les dépendances correspondantes aux imports de nos 2 nœuds sont identiques (<code>rclpy</code> et <code>std_msgs</code>), nous avons uniquement besoin de modifier le fichier <code>setup.py</code> en ajoutant un point d'entrée pour le subscriber.</p>
                            </li>
                        
                            <li>
                                <p>Ajoutez la ligne <code>'listener = py_pubsub.subscriber_member_function:main'</code>, entre les crochets de <code>'console_script'</code> et après la ligne d'entrée du publisher.</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code38')">Copier</button>
<pre id="code38" class="code-content">
'listener = py_pubsub.subscriber_member_function:main'
</pre>
                                </div>
                            </li>
                        
                            <li>
                                <p>Vous devriez obtenir :</p>
                                <img src="images/tuto_2/section6/Images dépendances/setup py 2.png" width="400px">
                                <p>Sauvegardez le fichier !</p>
                            </li>
                        
                            <li>
                                <p>Toutes les dépendances ont été mises dans les différents fichiers. Passons à la construction du package <code>py_pubsub</code> contenant les 2 nœuds.</p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection6-8">
                        <h4>Construction du package</h4>
                        <ol>
                            <li>
                                <p>Revenez dans la racine de votre workspace :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code39')">Copier</button>
<pre id="code39" class="code-content">
cd ~/ros2_ws/
</pre>
                                </div>
                            </li>
                        
                            <li>
                                <p>Avant de construire votre package, lancez une fonction qui permet de télécharger les librairies des différentes dépendances que vous avez utilisées dans vos différents packages et qui ne sont pas encore téléchargées. La procédure se décompose en 3 étapes :</p>
                                <ol>
                                    <li>
                                        <p>Tapez la commande suivante :</p>
                                        <div class="code-block">
<button class="copy-button" onclick="copyCode('code40')">Copier</button>
<pre id="code40" class="code-content">
rosdep init
</pre>
                                        </div>
                                        <p>Il est possible que cela prenne plusieurs minutes ! À la fin, un message vous avertira qu'il est préférable de taper la commande suivante. <br>En cas de message d'erreur, cela vient probablement du fait que cette commande à déjà été utilisée. Passez à la suivante !</p>
                                    </li>
                        
                                    <li>
                                        <p>Faire la mise à jour des dépendances :</p>
                                        <div class="code-block">
<button class="copy-button" onclick="copyCode('code41')">Copier</button>
<pre id="code41" class="code-content">
rosdep update
</pre>
                                        </div>
                                        <p>Il est possible que cela prenne plusieurs minutes !</p>
                                    </li>
                        
                                    <li>
                                        <p>Tapez une commande pour faire une vérification des dépendances :</p>
                                        <div class="code-block">
<button class="copy-button" onclick="copyCode('code42')">Copier</button>
<pre id="code42" class="code-content">
rosdep check --from-paths src --ignore-src --rosdistro $ROS_DISTRO
</pre>
                                        </div>
                                    </li>
                                </ol>
                        
                                <p><strong>Utiliser ces 3 commandes est une bonne habitude à prendre, car vous risquez d'avoir des packages "buggés" qui se construiront correctement mais qui seront inutilisables en cas de dépendance manquante !</strong></p>
                            </li>
                        
                            <li>
                                <p>Construisez votre package uniquement et pas tout votre workspace en tapant la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code43')">Copier</button>
<pre id="code43" class="code-content">
colcon build py_pubsub
</pre>
                                </div>
                            </li>
                        
                            <li>
                                <p>Faites un <code>ls</code> pour vérifier que votre package <code>py_pubsub</code> se trouve bien dans le répertoire <code>~/ros2_ws/src/</code></p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code43.1')">Copier</button>
<pre id="code43.1" class="code-content">
cd ~/ros2_ws/src/
ls
</pre>
                                </div>
                            </li>
                        </ol>
                        
                    </section>

                    <section id="subsection6-9">
                        <h4>Sourcer l'overlay de votre workspace</h4>
                        <ol>
                            <li>
                                <p>Votre package est donc construit et peut donc être utilisé avec ROS2. Avant de mettre à source de l'overlay dans un nouveau terminal, rendez-vous à la racine de votre workspace :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code44')">Copier</button>
<pre id="code44" class="code-content">
cd ~/ros2_ws/
source install/setup.bash
</pre>
                                </div>
                                <img src="images/tuto_2/section4/source overlay.png" width="300px">
                               
                            </li>
                        
                            <li>
                                <p><strong>N'oubliez pas cette étape sinon la commande suivante ne fonctionnera pas car "l'overlay" ne sera pas sourcé !</strong>.</p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection6-10">
                        <h4>Tester votre package Python</h4>
                        <ol>
                            <li>
                                <p>Dans notre cas, notre package se nomme <code>py_pubsub</code>. Il contient les exécutables <code>publisher_member_function.py</code> et <code>subscriber_member_function.py</code>. Cependant, les nœuds se nomment <code>talker</code> et <code>listener</code>. Ces noms viennent directement du fichier <code>setup.py</code> et des noms des points d'entrée de notre package <code>py_pubsub</code> :</p>
                                <img src="images/tuto_2/section6/Images dépendances/setup py 2.png" width="400px">
                            </li>
                        
                            <li>
                                <p>Testez le publisher, nommé <code>talker</code>, de votre package en tapant la commande suivante dans le premier terminal :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code45')">Copier</button>
<pre id="code45" class="code-content">
ros2 run py_pubsub talker
</pre>
                                </div>
                                <img src="images/tuto_2/section6/Images/ros2 run talker.png" width="300px">
                                
                                <p>Vous obtiendrez dans le terminal :</p>
                                <img src="images/tuto_2/section6/Images/ros2 run talker res.png" width="500px">
                                
                                <p>Vous pouvez voir que le nœud <code>talker</code> de votre package permet d'afficher du texte dans le terminal à un intervalle régulier de 0.5s.</p>
                            </li>
                        
                            <li>
                                <p>Ouvrez un deuxième terminal et allez dans la racine de votre workspace (<code>cd ~/ros2_ws/</code>). Tapez ensuite la commande pour <strong>mettre la source de l'overlay</strong> dans le terminal. Puis, tapez la commande pour lancer le subscriber, nommé <code>listener</code> :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code46')">Copier</button>
<pre id="code46" class="code-content">
cd ~/ros2_ws/
source install/setup.bash
ros2 run py_pubsub listener
</pre>
                                </div>
                                <img src="images/tuto_2/section6/Images/ros2 run listener.png" width="300px"> 
                                
                                <p>Vous obtiendrez dans le troisième terminal :</p>
                                <img src="images/tuto_2/section6/Images/ros2 run listener res.png" width="450px">

                            </li>
                        
                            <li>
                                <p>Vous avez créé deux nœuds.Un pour publier et l'autre pour souscrire à ces données sur un topic. Avant de les exécuter, vous avez ajouté leurs dépendances et leurs points d'entrée aux fichiers de configuration du package.</p>
                            </li>
                        </ol>
                        
                    </section>

                    <section id="subsection6-11">
                        <h4>Visualiser les deux noeuds et le topic de votre package</h4>
                        <ol>
                            <li>
                                <p>Visualisez vos deux nœuds communiquer via un topic grâce à rqt_graph.</p>
                                <p>Ouvrez un troisième terminal et tapez la commande pour ouvrir rqt_graph. (Rappel de la commande : <code>$ rqt_graph</code>)</p>
                            </li>
                        
                            <li>
                                <p>Vous obtiendrez le graphe suivant dans rqt_graph :</p>
                                <img src="images/tuto_2/section6/Images/rqt_graph package.png" width="400px">
                                <p>Le nom des deux noeuds provient directement de leur code <code>setup.py</code> respectif. Les noeuds ont été créés avec la fonction <code>super().__init__('minimal_publisher')</code> et <code>super().__init__('minimal_subscriber')</code></p>
                                <p>Le nom du topic provient directement de la fonction <code>self.publisher_ = self.create_publisher(String, 'topic', 10)</code> qui signifie qu'un topic 'topic' va être crée pour des messages de type String et que le noeud <code>minimal_publisher</code> va publier des données dessus. <br> Et la fonction <code>self.subscription = self.create_subscription(String,'topic', self.listener_callback, 10)</code> signifie que l noeud minimal_subscriber va s'abonner au topic 'topic'.</p>
                            </li>
                        </ol>
                        
                        <p>Vous savez maintenant créer plusieurs nœuds dans un seul package Python. Pour le faire en CMake, la méthode est similaire (langage en <code>C++</code> et structure différentes), mais nous ne la traiterons pas ici.</p>
                        
                    </section>

                </section>


                <section id="section7">
                    <h3>Créer un package pour faire bouger une tortue de TurtleSim</h3>
                    <p>Dans cette partie nous allons créer un package python qui permet de faire bouger une tortue de TurtleSim. Nous commencerons pas la création du package.</p>
                    
                    <section id="subsection7-1">
                        <h4>Créer le package en Python</h4>
                        <ol>
                            <li>
                                <p>Déplacez-vous dans le répertoire <code>src</code> de votre workspace. Pour ce faire, tapez la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code47')">Copier</button>
<pre id="code47" class="code-content">
cd ~/ros2_ws/src/
</pre>
                                </div>
                                <img src="images/tuto_2/section2/cd src worspace.png" width="200px">
                        
                                <p>Nous appellerons notre package : <code>my_turtle_controller</code>.</p>
                            </li>
                        
                            <li>
                                <p>Entrez, donc, la commande suivante dans votre terminal :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code48')">Copier</button>
<pre id="code48" class="code-content">
ros2 pkg create --build-type ament_python my_turtle_controller
</pre>
                                </div>
                                <img src="images/tuto_2/section7/Images/rso2 pkg create.png" width="550px">
                        
                                <p>Vous aurez maintenant un nouveau dossier dans le répertoire <code>src</code> de votre espace de travail appelé <code>my_turtle_controller</code>.</p>
                            </li>
                        
                            <li>
                                <p>Vérifiez que ce package a bien été créé, en utilisant la commande <code>ls</code> dans le sous-répertoire <code>src</code> : </p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code49')">Copier</button>
<pre id="code49" class="code-content">
cd ~/ros2_ws/src/
ls
</pre>
                                </div>
                                <p>Vous constaterez que votre package a bien été créé.</p>
                            </li>
                        </ol>
                        

                    </section>

                    <section id="subsection7-2">
                        <h4>Créer l'éxecutable python dans le package</h4>
                        <p>Dans cette partie, nous allons créer le fichier Python qui sera un exécutable du package. Le code de ce fichier permettra de publier des messages de type <code>geometry_msgs_msg_Twist</code> sur le topic <code>/turtle1/cmd_vel</code> de TurtleSim. C'est-à-dire que nous allons publier des messages contenant des vitesses linéaires et angulaires sur le topic <code>/turtle1/cmd_vel</code>, mais cette fois-ci en utilisant Python dans le but que la tortue bouge en forme de cercle.</p>

                        <ol>
                            <li>
                                <p>Rendez-vous dans le répertoire <code>~ros2_ws/src/my_turtle_controller/my_turtle_controller</code>.</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code50')">Copier</button>
<pre id="code50" class="code-content">
cd ~/ros2_ws/src/my_turtle_controller/my_turtle_controller
</pre>
                                </div>
                            </li>
                            
                            <li><p>Créez un fichier que nous nommerons <code>draw_circle.py</code> :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code51')">Copier</button>
<pre id="code51" class="code-content">
sudo nano draw_circle.py
</pre>
                                </div>
                                <img src="images/tuto_2/section7/Images/sudo nano draw_circle py.png" width="600px" />
                            </li>
                            
                            <li id="code_draw_circle.py">
                                <p>Écrivez le code suivant dans la fenêtre de l'éditeur de texte (Vous trouverez ce script en <a href="#annexe3">Annexe 3</a>) :</p>
                                <img src="images/tuto_2/section7/Images/code draw_circle py.png" width="550px" />
                            
                                <p>Comme vous le constatez peut-être, ce code ressemble fortement au code du publisher du précédent tutoriel. La seule différence est que les messages transmis sont ici du type <code>geometry_msgs/msg/Twist</code> (une structure sous la forme de deux vecteurs, l'un pour les vitesses linéaires et l'autre pour les vitesses angulaires).</p>

                                <p style="color: red;">
                                    Faites attention à l'indentation que vous utilisez dans votre code : utilisez soit des espaces, soit des tabulations, mais pas les deux dans le même code.
                                    <br>
                                    Faites attention à <code>__init__</code> qui contient 2 underscores avant et après le <code>init</code>. Pareil pour <code>__name__</code> et <code>__main__</code>.
                                </p>

                                <p>Sauvegardez avec <code>ctrl+O</code>, puis <code>Entrer</code> et <code>ctrl+X</code>.</p>
                            </li>
                        </ol>

                    </section>

                    <section id="subsection7-3">
                        <h4>Explication du code du publisher</h4>
                        <ol>
                            <li>
                                <p>Les premières lignes de code après les commentaires permettent d'importer <code>rclpy</code> pour que sa classe Node puisse être utilisée :</p>
                                <img src="images/tuto_2/section7/Images draw_circle/import rclpy.png" width="175px" />
                                <p>La déclaration suivante importe le type de message Twist que le nœud utilise pour structurer les données qu'il transmet au topic <code>/turtle1/cmd_vel</code> :</p>
                                <img src="images/tuto_2/section7/Images draw_circle/import Twist.png" width="225px" />
                            </li>
                            <li>
                                <p>Ensuite, la classe DrawCircleNode est créée et hérite de Node :</p>
                                <img src="images/tuto_2/section7/Images draw_circle/node DrawCircleNode.png" width="175px" />
                            </li>
                            <li>
                                <p>Voici, ci-dessous, le constructeur de la classe. La fonction <code>super().__init__</code> appelle le constructeur de la classe Node et lui donne le nom de votre nœud, dans ce cas "draw_circle".</p>
                                <p><code>create_publisher</code> déclare que le nœud publie des messages de type Twist (importé du module <code>geometry_msgs.msg</code>), sur le topic nommé <code>/turtle1/cmd_vel</code> de TurtleSim, et que la "taille de la file d'attente" est de 10. La taille de la file d'attente est un paramètre de QoS (qualité de service) requis qui limite le nombre de messages mis en file d'attente si un subscriber ne les reçoit pas assez rapidement.</p>
                                <p>Ensuite, un timer est créé avec un callback à exécuter toutes les 0.5 secondes :</p>
                                <img src="images/tuto_2/section7/Images draw_circle/def init().png" width="425px" />
                            </li>
                            <li>
                                <p><code>send_velocity_command</code> créée un message du type Twist et assigne une valeur pour la vitesses linéaire x et la vitesse angulaire z. (Rappel : la tortue se trouvant dans un espace de déplacement 2D, elle ne peut bouger linéairement que sur x et y, et angulairement uniquement sur z).</p>
                                <p>Ensuite, il y a la présence de la fonction qui publie le message Twist :</p>
                                <img src="images/tuto_2/section7/Images draw_circle/def send velocity cmd.png" width="225px" />
                            </li>
                            <li>
                                <p>Enfin, la fonction principale, <code>main()</code>, est définie :</p>
                                <img src="images/tuto_2/section7/Images draw_circle/def main.png" width="165px" />
                                <p>La bibliothèque rclpy est d'abord initialisée, puis le nœud est créé avec la classe <code>DrawCircleNode()</code>, et enfin le code fait <code>spin</code> le nœud pour que la fonction <code>send_velocity_command</code> soit appelée toutes les 0.5s.</p>
                                
                            </li>
                        </ol>
                        
                    </section>

                    <section id="subsection7-4">
                        <h4>Modifier les points d'entrée de votre package</h4>
                        <ol>
                            <li>
                                <p>Rendez-vous dans le répertoire <code>~/ros2_ws/src/my_turtle_controller/</code></p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code52')">Copier</button>
<pre id="code52" class="code-content">
cd ~/ros2_ws/src/my_turtle_controller/
</pre>
                                </div>
                            </li>
                            <li>
                                <p>Ouvrez avec l'éditeur nano, le fichier "setup.py". Modifier ensuite la section entry-point comme suit :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code53')">Copier</button>
<pre id="code53" class="code-content">
sudo nano setup.py
</pre>
                                </div>
                            </li>
                            <li>
                                <p>Ajoutez cette ligne de code entre les crochets de <code>'console_scripts'</code> :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code54')">Copier</button>
<pre id="code54" class="code-content">
"draw_circle = my_turtle_controller.draw_circle:main"
</pre>
                                </div>
                                <img src="images/tuto_2/section7/Images/setup py.png" width="400px" />
                            </li>
                        </ol>
                    </section>

                    <section id="subsection7-5">
                        <h4>Construire le package et sourcer l'overlay</h4>
                        <ol>
                            <li>
                                <p>Retournez à la racine de votre espace de travail avec la commande <code>cd ~/ros2_ws/</code> :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code55.0')">Copier</button>
<pre id="code55.0" class="code-content">
cd ~/ros2_ws/
</pre>
                                </div>
                            </li>
                            <li>
                                <p>Faites la vérification des dépendances avec les commandes suivantes :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code55')">Copier</button>
<pre id="code55" class="code-content">
rosdep init
</pre>
                                </div>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code55.1')">Copier</button>
<pre id="code55.1" class="code-content">
rosdep update
</pre>
                                </div>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code55.2')">Copier</button>
<pre id="code55.2" class="code-content">
rosdep install -i --from-path src --rosdistro humble -y
</pre>
                              </div>
                            </li>
                            <li>
                                <p>Construisez votre package en reconstruisant tout votre workspace en tapant la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code56')">Copier</button>
<pre id="code56" class="code-content">
colcon build
</pre>
                                </div>
                            </li>
                            <li>
                                <p>Votre package est construit et peut donc être utilisé avec ROS2. Pour ce faire nous devons mettre la source de l'overlay :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code57')">Copier</button>
<pre id="code57" class="code-content">
source install/local_setup.bash
</pre>
                                </div>
                            </li>
                            <li>
                                <p><strong>N'oubliez pas cette étape sinon la commande suivante ne fonctionnera pas car vous n'aurez pas sourcé votre "overlay".</strong></p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection7-6">
                        <h4>Tester votre package Python</h4>
                        <ol>
                            <li>
                                <p>Souvenez-vous de la structure de la commande permettant de lancer votre package :</p>
                                <div class="code-block" style="background-color: lightgray;">
<pre id="code58" class="code-content">
ros2 run &lt;package_name&gt; &lt;node_name&gt;
</pre>
                                </div>
                                <p>Dans notre cas, notre package se nomme <code>my_turtle_controller</code>. <code>&lt;node_name&gt;</code> correspond au nom du nœud de l'exécutable de notre package : <code>draw_circle</code>.</p>
                            </li>
                            <li>
                                <p>Ouvrez TurtleSim avant de lancer votre package :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code59')">Copier</button>
<pre id="code59" class="code-content">
ros2 run turtlesim turtlesim_node
</pre>
                                </div>
                                <img src="images/tuto_2/section7/Images/ros2 run turtlesim.png" width="300px">
                            </li>
                            <li>
                                <p>Testez votre package en tapant la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code60')">Copier</button>
<pre id="code60" class="code-content">
ros2 run my_turtle_controller draw_circle
</pre>
                                </div>
                                <img src="images/tuto_2/section7/Images/ros2 run draw_circle.png" width="475px">
                                <p>Vous pourrez voir que la tortue commencera à bouger sous la forme d'un cercle dans TurtleSim :</p>
                                <img src="images/tuto_2/section7/Images/TurtleSim.png" width="300px">
                    
                            </li>
                        </ol>
                        <br>
                        Le tutoriel <strong>Création de packages Python et C++</strong> est fini. Vous avez maintenant les bases pour créer vos propres packages sur ROS2 !
                        
                    </section>


                </section>

                <section id="section8">
                    <h3>Annexes</h3>

                    <section id="annexe1">
                        <h4>Annexe 1 : Script python "publisher_member_function.py"</h4>
                        <p>Revenez <a href="#code_publisher_member">au bon endroit</a> dans le tuto !</p>
                        <div class="code-block">
<button class="copy-button" onclick="copyCode('codeannexe1')">Copier</button>
<pre id="codeannexe1" class="code-content">
import rclpy
from rclpy.node import Node

from std_msgs.msg import String


class MinimalPublisher(Node):

    def __init__(self):
        super().__init__('minimal_publisher')
        self.publisher_ = self.create_publisher(String, 'topic', 10)
        timer_period = 0.5  # seconds
        self.timer = self.create_timer(timer_period, self.timer_callback)
        self.i = 0

    def timer_callback(self):
        msg = String()
        msg.data = 'Hello World: %d' % self.i
        self.publisher_.publish(msg)
        self.get_logger().info('Publishing: "%s"' % msg.data)
        self.i += 1


def main(args=None):
    rclpy.init(args=args)

    minimal_publisher = MinimalPublisher()

    rclpy.spin(minimal_publisher)

    # Destroy the node explicitly
    # (optional - otherwise it will be done automatically
    # when the garbage collector destroys the node object)
    minimal_publisher.destroy_node()
    rclpy.shutdown()


if __name__ == '__main__':
    main()
</pre>
                        </div>
                    </section>

                    <section id="annexe2">
                        <h4>Annexe 2 : Script python "subscriber_member_function.py"</h4>
                        <p>Revenez <a href="#code_subscriber_member">au bon endroit</a> dans le tuto !</p>
                        <div class="code-block">
<button class="copy-button" onclick="copyCode('codeannexe2')">Copier</button>
<pre id="codeannexe2" class="code-content">
import rclpy
from rclpy.node import Node

from std_msgs.msg import String


class MinimalSubscriber(Node):

    def __init__(self):
        super().__init__('minimal_subscriber')
        self.subscription = self.create_subscription(String,'topic', self.listener_callback, 10)
        self.subscription  # prevent unused variable warning

    def listener_callback(self, msg):
        self.get_logger().info('I heard: "%s"' % msg.data)


def main(args=None):
    rclpy.init(args=args)

    minimal_subscriber = MinimalSubscriber()

    rclpy.spin(minimal_subscriber)

    # Destroy the node explicitly
    # (optional - otherwise it will be done automatically
    # when the garbage collector destroys the node object)
    minimal_subscriber.destroy_node()
    rclpy.shutdown()


if __name__ == '__main__':
    main()
</pre>
                        </div>
                    </section>

                    <section id="annexe3">
                        <h4>Annexe 3 : Script python "draw_circle.py"</h4>
                        <p>Revenez <a href="#code_draw_circle.py">au bon endroit</a> dans le tuto !</p>
                        <div class="code-block">
<button class="copy-button" onclick="copyCode('codeannexe3')">Copier</button>
<pre id="codeannexe3" class="code-content">
import rclpy
from rclpy.node import Node
from geometry_msgs.msg import Twist


class DrawCircleNode(Node):

    def __init__(self):
        super().__init__('draw_circle')
        self.cmd_vel_pub_ = self.create_publisher(Twist, "/turtle1/cmd_vel", 10)
        timer_period = 0.5  # seconds
        self.timer = self.create_timer(timer_period, self.send_velocity_command)
        self.get_logger().info("Draw circle node has been started")

    def send_velocity_command(self):
        msg = Twist()
        msg.linear.x = 2.0
        #msg.linear.y = 1.0
        msg.angular.z = 1.0
        self.cmd_vel_pub_.publish(msg)


def main(args=None):
    rclpy.init(args=args)
    node = DrawCircleNode()
    rclpy.spin(node)
    rclpy.shutdown()
</pre>
                        </div>
                    </section>

                </section>
            </article>
            <!-- Ajoutez d'autres articles pour chaque tutoriel -->
        </section>
    </main>
    
    <script>
        // Fonction pour copier le contenu du bloc de code
        function copyCode(id) {
            const codeBlock = document.getElementById(id);
            const range = document.createRange();
            range.selectNode(codeBlock);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            document.execCommand("copy");
            window.getSelection().removeAllRanges();
        }

        // Script pour gérer l'affichage du menu
        var nav = document.querySelector('nav');
        var menuButton = document.getElementById('menu-button');
        var menuDropdown = document.getElementById('menu-dropdown');

        menuButton.addEventListener('click', function() {
            // Toggle la visibilité du menu déroulant
            menuDropdown.style.display = (menuDropdown.style.display === 'block') ? 'none' : 'block';
        });
    </script>
</body>
</html>